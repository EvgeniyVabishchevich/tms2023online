<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:insert="~{scriptsLinks.html}">
    <title>Search</title>
</head>
<body>

<div th:insert="~{header.html}"></div>

<div class="text-center">
    <input id="searchRequest" name="searchRequest" th:form="filterForm" placeholder="Search" type="text">
    <button type="submit" id="searchButton">Search</button>
</div>

<div class="row">
    <span th:id="searchResult" class="col-8">
        <div class="row justify-content-start" th:each="product : ${products}">
            <div class="card col-4 text-center border-2 border-dark m-3">
                <div class="row g-0">
                    <div class="col-4">
                        <img style="height: 25vh;" class="card-img-bottom object-fit-contain p-1 border-end border-dark"
                             th:src="@{/db/images/{imageName}(imageName=${product.getImageName()})}">
                    </div>
                    <div class="col-8">
                        <div class="card-body">
                            <h5 class="card-title" th:text="${product.getName()}"></h5>

                            <h4 class="card-subtitle text-start" th:text="'Description :'"></h4>
                            <p class="card-text text-start" th:text="${product.getDescription()}"></p>

                            <h4 class="card-subtitle text-start" th:text="'Price :'"></h4>
                            <p class="card-text text-start" th:text="${product.getPrice() + '$'}"></p>

                            <button onclick="addProductId(this.value)" th:value="${product.getId()}"
                                    class="btn btn-success">Buy</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </span>

    <div class="col-4">

        <form th:id="filterForm" th:method="get" th:action="@{/search}"
              class="border border-3 border-success rounded m-2 p-1">
            <h1 class="">Filter</h1><br>

            <label th:for="category" class="form-label ms-2">Category:</label>
            <select th:id="category" th:name="category" th:form="filterForm" class="form-select border-success">
                <option value="All">All</option>
                <option th:each="category : ${categories}" th:value="${category.getName()}"
                        th:text="${category.getName()}"></option>
            </select><br>

            <label class="form-label ms-2" th:text="'Price:'"></label>

            <label th:for="minPrice" th:text="'Min price'" class="form-label"></label>
            <input type="number" placeholder="0" th:name="minPrice" th:id="minPrice" th:value="${minPrice}">

            <label th:for="maxPrice" th:text="'Max price'" class="form-label"></label>
            <input type="number" placeholder="0" th:name="maxPrice" th:id="maxPrice" th:value="${maxPrice}">

            <button type="submit" class="btn btn-success">Apply</button>
        </form>

    </div>
</div>

</body>
</html>
